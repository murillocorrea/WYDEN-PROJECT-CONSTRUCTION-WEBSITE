<!DOCTYPE html>
   <script>
      const BACKEND_URL = "https://caeb-170-83-72-252.ngrok-free.app";
   </script>
   <html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <!--=============== FAVICON ===============-->
      <link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon">

      <!--=============== REMIXICONS ===============-->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.css">

      <!--=============== SWIPER CSS ===============-->
      <link rel="stylesheet" href="./assets/css/swiper-bundle.min.css">

      <!--=============== CSS ===============-->
      <link rel="stylesheet" href="assets/css/styles.css">

      <!--=============== FONTAWESOME ===============-->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

      <meta name="csrf-token" content="">

      <title>Site de contrução</title>
   </head>
   <body>
      <!--==================== HEADER ====================-->
      <header class="header" id="header">
    <nav class="nav container">
       <a href="#" class="nav__logo">
          <i class="ri-building-3-line"></i>
          <span>Construir</span>
       </a>

       <div class="nav__menu" id="nav-menu">
          <ul class="nav__list">
             <li>
                <a href="#home" class="nav__link active-link">Página Inicial</a>
             </li>

             <li>
                <a href="#about" class="nav__link">Sobre nós</a>
             </li>

             <li>
                <a href="#services" class="nav__link">Serviços</a>
             </li>

             <li>
                <a href="#projects" class="nav__link">Projetos</a>
             </li>

             <li>
                <a href="#contact" class="nav__link button">Contate-nos</a>
             </li>
          </ul>

          <!-- Close button -->
          <div class="nav__close" id="nav-close">
             <i class="ri-close-large-line"></i>
          </div>
       </div>

       <!-- Toggle menu -->
       <div class="nav__toggle" id="nav-toggle">
          <i class="ri-apps-2-line"></i>
       </div>
    </nav>
 </header>

      <!--==================== MAIN ====================-->
      <main class="main">
         <!--==================== HOME ====================-->
         <section class="home section" id="home">
    <img src="assets/img/home-lines-bg.svg" alt="image" class="home__lines">

    <div class="home__container container grid">
       <div class="home__content grid">
          <div class="home__data">
             <h1 class="home__title">
                Crie Aqui<br>
                as Construções <br>
                Que Você Deseja
             </h1>

             <p class="home__description">
                Oferecemos o melhor projeto, construção e
                serviços de manutenção para você e sua família.
             </p>

             <div class="home__buttons">
                <a href="#services" class="button">Nossos Serviços</a>

                <a href="#projects" class="button__link">
                   <span>Ver Projetos</span>
                   <i class="ri-arrow-right-line"></i>
                </a>
             </div>
          </div>

          <div class="home__info">
             <div>
                <h3 class="home__info-title">10+</h3>
                <p class="home__info-description">Anos de <br> Experiência</p>
             </div>

             <div>
                <h3 class="home__info-title">200</h3>
                <p class="home__info-description">Projetos <br> Completados</p>
             </div>
          </div>
       </div>

       <div class="home__images">
          <img src="assets/img/home-img-1.png" alt="image" class="home__img-1">
          <img src="assets/img/home-img-2.png" alt="image" class="home__img-2">
       </div>
    </div>
 </section>

         <!--==================== ABOUT ====================-->
         <section class="about section" id="about">
    <div class="about__container container grid">
       <div class="about__data">
          <span class="section__subtitle">Sobre Nós</span>
          <h2 class="section__title">
            Nós Fornecemos o Melhor <br> Serviço para Construir
          </h2>

          <p class="about__description">
            Nós nos esforçamos para fornecer os melhores profissionais
            para tornar seu projeto uma obra-prima de construção,
            algo único e incomparável.
          </p>

          <ul class="about__list grid">
             <li class="about__list-item">
                <i class="ri-checkbox-circle-line"></i>
                <span>Trabalhadores profissionais</span>
             </li>

             <li class="about__list-item">
                <i class="ri-checkbox-circle-line"></i>
                <span>Qualidade garantida</span>
             </li>

             <li class="about__list-item">
                <i class="ri-checkbox-circle-line"></i>
                <span>Ampla experiência</span>
             </li>

             <li class="about__list-item">
                <i class="ri-checkbox-circle-line"></i>
                <span>Nós orçamos seu projeto</span>
             </li>
          </ul>

          <a href="#projects" class="button">Ver Projetos</a>
       </div>

       <div class="about__images">
          <img src="assets/img/about-img-1.png" alt="image" class="about__img-1">
          <img src="assets/img/about-img-2.png" alt="image" class="about__img-2">
       </div>
    </div>
 </section>

         <!--==================== SERVICES ====================-->
         <section class="services section" id="services">
    <div class="services__container container grid">
       <div class="services__data">
          <div>
             <span class="section__subtitle">NOSSOS SERVIÇOS</span>
             <h2 class="section__title">
                Serviços de Construção de <br> Alta Qualidade".
             </h2>
          </div>

          <p class="services__description">
            Nós oferecemos múltiplos serviços para você, proporcionando confiança e segurança na construção.
          </p>

          <a href="#contact" class="button">Contate Agora</a>
       </div>

       <div class="services__swiper swiper">
          <div class="swiper-wrapper">
             <article class="services__card swiper-slide">
                <div class="services__icon">
                   <i class="ri-building-line"></i>
                </div>

                <h3 class="services__title">Construção <br> Habitacional</h3>

                <p>
                    Nós construímos com os melhores profissionais e trabalho de alta qualidade para um lar seguro e eficaz.
                </p>
             </article>

             <article class="services__card swiper-slide">
                <div class="services__icon">
                   <i class="ri-home-office-line"></i>
                </div>

                <h3 class="services__title">Construção de <br> Áreas Residenciais</h3>

                <p>
                    Nós construímos com os melhores profissionais e com trabalho de alta qualidade para um lar seguro e eficaz.
                </p>
             </article>

             <article class="services__card swiper-slide">
                <div class="services__icon">
                   <i class="ri-tools-line"></i>
                </div>

                <h3 class="services__title">Manutenção & <br> Reparo</h3>

                <p>
                    Nós construímos com os melhores profissionais e com trabalho de alta qualidade para um lar seguro e eficiente.
                </p>
             </article>

             <article class="services__card swiper-slide">
                <div class="services__icon">
                   <i class="ri-box-3-line"></i>
                </div>

                <h3 class="services__title">Instalação de <br> Cerâmicas e Outros</h3>

                <p>
                    Nós construímos com os melhores profissionais e trabalho de alta qualidade para um lar seguro e eficaz
                </p>
             </article>

             <article class="services__card swiper-slide">
                <div class="services__icon">
                   <i class="ri-drop-line"></i>
                </div>

                <h3 class="services__title">Instalação de <br> Água e Esgoto</h3>

                <p>
                    Nós construímos com os melhores profissionais e com trabalho de alta qualidade para um lar seguro e eficiente.
                </p>
             </article>
          </div>
       </div>

       <!-- Navigation buttons -->
       <div class="swiper-button-prev">
          <i class="ri-arrow-left-line"></i>
       </div>

       <div class="swiper-button-next">
          <i class="ri-arrow-right-line"></i>
       </div>
    </div>

    <div class="services__shape"></div>
 </section>

         <!--==================== PROJECTS ====================-->
         <section class="projects section" id="projects">
    <button id="openModalButton" class="button">Registrar Projeto</button>

    <div id="projectModal" class="modal" hidden>
    <div class="modal-content">
        <h2 id="modalTitle">Registrar Projeto</h2>
        <form id="projectForm" enctype="multipart/form-data">
            <input type="hidden" name="_token" value="" autocomplete="off">            <input type="hidden" name="_method" value="POST">            <input type="hidden" id="projectId" name="projectId">
            <div class="form__group">
                <label for="projectName" class="form__label">Nome Projeto</label>
                <input type="text" id="projectName" name="projectName" class="form__input" required>
            </div>
            <div class="form__group">
                <label for="projectPrice" class="form__label">Preço do Projeto</label>
                <input type="number" id="projectPrice" name="projectPrice" class="form__input" required>
            </div>
            <div class="form__group">
                <label for="projectDescription" class="form__label">Descrição do Projeto</label>
                <textarea id="projectDescription" name="projectDescription" class="form__input" rows="4" required></textarea>
            </div>
            <div class="form__group">
                <label for="projectImage" class="form__label">Enviar Imagem</label>
                <input type="file" id="projectImage" name="projectImage" class="form__input" accept="image/*">
            </div>
            <button type="submit" id="submitButton" class="button">Registrar Projeto</button>
            <button type="button" id="closeModalButton" class="button">Fechar</button>
        </form>
    </div>
</div>

    <span class="section__subtitle">NOSSOS PROJETOS</span>
    <h2 class="section__title">Últimos Projetos <br> Registrados</h2>
    <div id="projects-container" class="projects__container container grid">
    </div>
</section>

<script>
    fetch(`${BACKEND_URL}/api/projects/get`, { method: 'POST' })
        .then(response => {
            if (!response.ok) {
                throw new Error(`Erro na resposta: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            console.log('Dados recebidos:', data);

            if (Array.isArray(data) && data.length > 0) {
                const projectsContainer = document.getElementById('projects-container');
                projectsContainer.innerHTML = '';

                const chunks = chunkArray(data, 3);

                chunks.forEach(chunk => {
                    const row = document.createElement('div');
                    row.classList.add('projects__row');

                    chunk.forEach(project => {
                        const projectCard = document.createElement('article');
                        projectCard.classList.add('projects__card');
                        projectCard.innerHTML = `
                            <img src="${project.image_path ? `${BACKEND_URL}/storage/${project.image_path}` : 'assets/img/default-image.jpg'}" alt="${project.name}" class="projects__img">
                            <div class="projects__data">
                                <h2 class="projects__title">${project.name}</h2>
                                <p class="projects__price">A partir de R$ ${parseFloat(project.price).toFixed(2)}</p>
                                <p>${project.description}</p>
                                <div class="button-container">
                                    <form action="${BACKEND_URL}/projects/delete/${project.id}" method="POST" style="display: inline;" id="delete-form-${project.id}">
                                        <input type="hidden" name="_method" value="DELETE">
                                        <input type="hidden" name="_token" value="${CSRF_TOKEN}">
                                        <button type="submit" class="delete-button" onclick="confirmDelete(${project.id}, event)">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </form>
                                </div>
                                <button class="button contract-project-button" onclick="confirmContract()">Contratar Projeto</button>
                            </div>
                        `;

                        row.appendChild(projectCard);
                    });

                    projectsContainer.appendChild(row);
                });
            } else {
                console.log('Nenhum projeto encontrado');
                document.getElementById('projects-container').innerHTML = '<p>Nenhum projeto encontrado.</p>';
            }
        })
        .catch(error => {
            console.error('Erro ao processar a requisição:', error);
            alert('Ocorreu um erro ao carregar os projetos. Tente novamente mais tarde.');
        });

    // Função para dividir um array em chunks
    function chunkArray(array, size) {
        const result = [];
        for (let i = 0; i < array.length; i += size) {
            result.push(array.slice(i, i + size));
        }
        return result;
    }

</script>

         <!--==================== CONTACT ====================-->
         <section class="contact section contact_section" id="contact">
    <div class="container">
        <span class="section__subtitle">Contate-nos</span>
        <h2 class="section__title">Escreva Para Nós e Construa</h2>

        <div class="contact__container grid">
            <img src="assets/img/contact-img.png" alt="image" class="contact__img">

            <div class="contact__data grid">
                <!-- Formulário de Contato -->
                <div class="contact__card">
                    <h3 class="contact__title">Envie uma Mensagem</h3>
                    <div class="contact__form">
                        <form action="http://localhost/contact-information/store" method="POST" id="contactForm">
                            <input type="hidden" name="_token" value="" autocomplete="off">                            <div class="form__group">
                                <label for="name" class="form__label">Seu nome</label>
                                <input type="text" id="name" name="name" class="form__input" placeholder="Seu nome" required>
                                <small id="nameError" class="form__error"></small>
                            </div>

                            <div class="form__group">
                                <label for="email" class="form__label">Seu Email</label>
                                <input type="email" id="email" name="email" class="form__input" placeholder="seu@email.com" required>
                                <small id="emailError" class="form__error"></small>
                            </div>

                            <div class="form__group">
                                <label for="phone" class="form__label">Seu Telefone</label>
                                <input type="text" id="phone" name="phone" class="form__input" placeholder="(55) 9 9999-9999" required>
                                <small id="phoneError" class="form__error"></small>
                            </div>
                            <div class="form__group">
                                <label for="subject" class="form__label">Assunto</label>
                                <input type="text" id="subject" name="subject" class="form__input" placeholder="Assunto" required>
                                <small id="subjectError" class="form__error"></small>
                            </div>

                            <div class="form__group">
                                <label for="message" class="form__label">Sua Mensagem</label>
                                <textarea id="message" name="message" class="form__input" rows="5" placeholder="Sua Mensagem" required></textarea>
                                <small id="messageError" class="form__error"></small>
                            </div>

                            <button type="submit" class="button">Enviar Mensagem</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
      </main>

      <!--==================== FOOTER ====================-->
      <footer class="footer">
         <div class="footer__container container grid">
            <div>
               <a href="#" class="footer__logo">
                  <i class="ri-building-3-line"></i>
                  <span>Construir</span>
               </a>

               <p class="footer__description">Nós contruimos segurança <br> e confiança nos lares.</p>

               <address class="footer__email">Email: construct123@email.com</address>
            </div>

            <div class="footer__content grid">
               <div>
                  <h3 class="footer__title">Empresa</h3>

                  <ul class="footer__links">
                     <li>
                        <a href="#about" class="footer__link">Sobre nós</a>
                     </li>

                     <li>
                        <a href="#services" class="footer__link">Serviços</a>
                     </li>

                     <li>
                        <a href="#projects" class="footer__link">Projetos</a>
                     </li>
                  </ul>
               </div>

               <div>
                  <h3 class="footer__title">Informações</h3>

                  <ul class="footer__list">
                     <li>
                        <address class="footer__info">Peru - Lima <br> Av #321</address>
                     </li>

                     <li>
                        <address class="footer__info">9AM - 11PM</address>
                     </li>
                  </ul>
               </div>

               <div>
                  <h3 class="footer__title">Mídia Social</h3>

                  <div class="footer__social">
                     <a href="https://www.facebook.com/" target="_blank" class="footer__social-link">
                        <i class="ri-facebook-circle-line"></i>
                     </a>

                     <a href="https://www.instagram.com/" target="_blank" class="footer__social-link">
                        <i class="ri-instagram-line"></i>
                     </a>

                     <a href="https://twitter.com/" target="_blank" class="footer__social-link">
                        <i class="ri-twitter-x-fill"></i>
                     </a>
                  </div>
               </div>
            </div>
         </div>
      </footer>

      <!--========== SCROLL UP ==========-->
      <a href="#" class="scrollup" id="scroll-up">
         <i class="ri-arrow-up-line"></i>
      </a>

      <!--=============== SCROLLREVEAL ===============-->
      <script src="assets/js/scrollreveal.min.js"></script>

      <!--=============== SWIPER JS ===============-->
      <script src="assets/js/swiper-bundle.min.js"></script>

      <!--=============== MAIN JS ===============-->
      <script src="assets/js/main.js"></script>

      <!--=============== FORM VALIDATION JS ===============-->
      <script src="assets/js/formValidation.js"></script>

      <!--=============== REGISTER PROJECT MODAL JS ===============-->
    <script src="assets/js/registerProjectModal.js"></script>

      <!--=============== SWEETALERT2 JS ===============-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
   </body>
</html>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('phone').addEventListener('input', function(event) {
            var phone = event.target.value.replace(/\D/g, '');
            phone = phone.substring(0, 11);
            event.target.value = phone.replace(/(\d{2})(\d{1})(\d{4})(\d{0,4})/, '($1) $2 $3-$4');
        });
    });
</script>
